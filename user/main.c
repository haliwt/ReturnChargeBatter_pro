/**
*   ************************************************************************************
*								ï¿½Ïºï¿½Ð¾Ê¥ï¿½ï¿½ï¿½Ó¹É·ï¿½ï¿½ï¿½ï¿½Þ¹ï¿½Ë¾
*								    www.holychip.cn
*	************************************************************************************
*	@Examle Version		V1.0.0.0
*	@Demo Version		V1.0.1.0
*	@Date				2017.09.18
*	************************************************************************************
*									 Ä£ï¿½ï¿½ï¿½ï¿½ï¿½Ü½ï¿½ï¿½ï¿½
*	1ï¿½ï¿½ï¿½ï¿½ï¿½ë£¨ï¿½ï¿½SMTï¿½ï¿½Ä£Ê½ï¿½ï¿½VDD=5VÊ±ï¿½ï¿½ï¿½Íµï¿½Æ½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Íµï¿½Ñ¹ï¿½ï¿½VIL1ï¿½ï¿½ï¿½ï¿½Î§Îª0~1.5Vï¿½ï¿½ï¿½ßµï¿½Æ½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
*	   ï¿½ßµï¿½Ñ¹ï¿½ï¿½VIH1ï¿½ï¿½ï¿½ï¿½Î§Îª3.5~5Vï¿½ï¿½
*	2ï¿½ï¿½ï¿½ï¿½ï¿½ë£¨SMTï¿½ï¿½Ä£Ê½ï¿½ï¿½VDD=5VÊ±ï¿½ï¿½ï¿½Íµï¿½Æ½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Íµï¿½Ñ¹ï¿½ï¿½VIL1ï¿½ï¿½ï¿½ï¿½Î§Îª0~1Vï¿½ï¿½ï¿½ßµï¿½Æ½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ßµï¿?
*	   Ñ¹ï¿½ï¿½VIH1ï¿½ï¿½ï¿½ï¿½Î§Îª4~5Vï¿½ï¿½
*	3ï¿½ï¿½P0xDBCT [5:0]ï¿½ï¿½ï¿½Ãµï¿½ï¿½ï¿½ï¿½ï¿½Ê±ï¿½ï¿½ï¿½ï¿½Ò»ï¿½ï¿½ï¿½ï¿½Î§ï¿½ï¿½ï¿½ï¿½ÆµÏµï¿½ï¿½*Tosc*P0xDBCT[5:0]-Tosc<ï¿½ï¿½ï¿½ï¿½Ê±ï¿½ï¿½<
*	   ï¿½ï¿½ÆµÏµï¿½ï¿½*Tosc*(P0xDBCT[5:0]+1)-Toscï¿½ï¿½
	4ï¿½ï¿½HC89F003ï¿½Ïµç¸´Î»ï¿½Ô¼ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Î»ï¿½ï¿½ï¿½ÜµÄ¸ï¿½Î»ï¿½ï¿½ï¿½ï¿½ï¿½Ðµï¿½IOï¿½ï¿½Ø¼Ä´ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ö¸ï¿½ÎªÄ¬ï¿½ï¿½Öµï¿½ï¿½
*	************************************************************************************
*									 Ó¦ï¿½ï¿½×¢ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
*	1ï¿½ï¿½ï¿½ï¿½Ê¹ï¿½Ã·ï¿½ï¿½ï¿½ï¿½ï¿½Ê±ï¿½ï¿½ï¿½ï¿½JTAGï¿½ï¿½ï¿½Ãµï¿½IOï¿½Ú»ï¿½ï¿½Ð¶ï¿½È¡ï¿½ï¿½Ð´ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ì³£ï¿½ï¿½ï¿½ï¿½Ë½ï¿½ï¿½ï¿½Ê¹ï¿½Ã·ï¿½ï¿½ï¿½ï¿½ï¿½Ê±ï¿½ï¿½Ò?
*	   ï¿½ï¿½ï¿½ï¿½ï¿½â¼¸ï¿½ï¿½IOï¿½Ú¡ï¿½ï¿½Ï¿ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ê¹ï¿½Ãµï¿½Ô´ï¿½ï¿½ï¿½ç¼´ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
*	2ï¿½ï¿½ï¿½ï¿½ï¿½äµ½P0.0/P0.1/P0.2ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ü½ï¿½ï¿½ÏµÄ¹ï¿½ï¿½Ü½Å¡ï¿½ï¿½â²¿ï¿½Ð¶ï¿½ï¿½ï¿½ï¿½ë¡¢ï¿½ï¿½ï¿½Ï¼ï¿½ï¿½ï¿½ï¿½ï¿½Å¶ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Æ¡ï¿?
*   3ï¿½ï¿½HC89F003ï¿½ï¿½Bï¿½æ¼°ï¿½ï¿½ï¿½Ôºï¿½æ±¾ï¿½ï¿½IOï¿½ï¿½P23ï¿½ï¿½P24ï¿½ï¿½P25ï¿½ï¿½P27ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Í¬Ê±Ê¹ï¿½ÜµÄ¹ï¿½ï¿½Ü£ï¿½
       ï¿½ï¿½ï¿½Ç²ï¿½ï¿½ï¿½ï¿½ï¿½Ê¹ï¿½Ã´ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ô¼ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ë£¬ï¿½ï¿½ï¿½Ç¿ï¿½ï¿½ï¿½Ê¹ï¿½Ã´ï¿½Ê©ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ô¼ï¿½ï¿½ï¿½Ê©ï¿½ï¿½ï¿½ï¿½
       ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ë£¬ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½DateSheetï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ð¾Æ¬ï¿½æ±¾ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ñ¯ï¿½Ê´ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ô¼ï¿½Ô­ï¿½ï¿½Òµï¿½ï¿?
*	************************************************************************************
*  								       ï¿½Í»ï¿½ï¿½ï¿½ï¿½ï¿½
*	ï¿½ï¿½Ð»ï¿½ï¿½Ê¹ï¿½ï¿½ï¿½ï¿½ï¿½ÇµÄµï¿½Æ¬ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ö´ï¿½ï¿½ï¿½ï¿½Ôºï¿½ï¿½ï¿½ï¿½ï¿½Ê¹ï¿½Ã´ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ê¡ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ïºï¿½Ð¾Ê¥ï¿½ï¿½ï¿½Ó¹Ù·ï¿½QQÈº
*	****************************ï¿½ï¿½ï¿½ï¿½Ö§ï¿½ï¿½Èºï¿½ï¿½201030494***********************************
*   ************************************************************************************
**/
#define	ALLOCATE_EXTERN
#define	ver 5

#include "HC89F0541.h"

#include "..\lib\LB_Led.h"
#include "..\lib\LB_AD.h"
#include "..\lib\LB_Usart.h"
#include "..\lib\LB_eeprom.h"
#include "..\lib\LB_Motor.h"
#include "..\lib\LB_IR.h"
#include "..\lib\LB_Run.h"


unsigned int gui_T5Value;               //T5 ï¿½ï¿½ï¿½ï¿½ï¿½È¡Ö?
unsigned int gui_newT5Value = 0;		//T5 ï¿½ï¿½ï¿½ï¿½ï¿½È¡ï¿½ï¿½Ö?
unsigned int gui_oldT5Value = 0; 		//T5 ï¿½ï¿½ï¿½ï¿½ï¿½È¡ï¿½ï¿½Ö?

void InitSysclk(INT8U SYS)
{

	/************************************ÏµÍ³ï¿½ï¿½Ê¼ï¿½ï¿½****************************************/
	WDTCCR = 0x00;						//ï¿½Ø±Õ¿ï¿½ï¿½Å¹ï¿½

	while((CLKCON&0x20)!=0x20);			//ï¿½È´ï¿½ï¿½Ú²ï¿½ï¿½ï¿½Æµï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
	CLKSWR = 0x51;						//Ñ¡ï¿½ï¿½ï¿½Ú²ï¿½ï¿½ï¿½ÆµÊ±ï¿½ï¿½Îªï¿½ï¿½Ê±ï¿½Ó£ï¿½ï¿½Ú²ï¿½ï¿½ï¿½ÆµRC2ï¿½ï¿½Æµï¿½ï¿½Fosc=16MHz
	while((CLKSWR&0xC0)!=0x40);			//ï¿½È´ï¿½ï¿½Ú²ï¿½ï¿½ï¿½Æµï¿½Ð»ï¿½ï¿½ï¿½ï¿?
	CLKDIV = SYS;						//Fosc1ï¿½ï¿½Æµï¿½Ãµï¿½Fcpuï¿½ï¿½Fcpu=16MHz
}



/***************************************************************************************
  * @Êµï¿½ï¿½Ð§ï¿½ï¿½	ï¿½ï¿½P02ï¿½Ë¿Úµï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Îª100K

ï¿½ï¿½ï¿½ï¿½3004ï¿½ï¿½ï¿½ï¿½Ò£ï¿½ï¿½É¨ï¿½Ø»ï¿½ï¿½ï¿½ï¿½Ü¶ï¿½ï¿½ï¿½??????? 2020.09.09
?
ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
1.???? ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ä¹¦ï¿½ï¿½ 
?
2.???? ï¿½ï¿½ï¿½ï¿½Ò»ï¿½ï¿½ï¿½Ðµï¿½ï¿½×²ï¿½ï¿½ï¿½ï¿?
?
3.ï¿½ï¿½É¨Ä£Ê½:
3.1. ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½É¨Ä£Ê½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ä¬ï¿½ï¿½ï¿½ï¿½ï¿½Ä£Ê½ï¿½ï¿½ï¿½ï¿?
3.2. ï¿½Ó±ï¿½ï¿½ï¿½É¨Ä£Ê½ï¿½ï¿½ï¿½ï¿½ï¿½Ú¹ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½É¨Ä£Ê½ï¿½Â£ï¿½ 30ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½×²Ç½5ï¿½ï¿½ï¿½Ô¶ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ó±ï¿½ï¿½ï¿½É¨Ä£Ê½ï¿½ï¿½
3.3 ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½É¨Ä£Ê½ï¿½ï¿½ 
3.4. ï¿½Ë¹ï¿½ï¿½ï¿½É¨Ä£Ê½ï¿½ï¿½ï¿½ï¿½Í¨ï¿½ï¿½Ò£ï¿½ï¿½ï¿½ï¿½ï¿½Ù¿Ø·ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ò·ï¿½ï¿½ï¿½
?
4.ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ò£ï¿½ï¿½: Ç°ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ò¿ï¿½ï¿½Æ£ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½3ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Í·ï¿½ï¿½ï¿½ï¿½ï¿½Ó¿Ú£ï¿½ï¿½ï¿½ï¿½ï¿½Ï¸ï¿½ë¿´Ë¿Ó¡Í¼ï¿½ï¿½
?
5.ï¿½ï¿½Ðµï¿½ï¿½×²ï¿½ï¿½â£ºï¿½ï¿½ï¿½é£¬ï¿½Ð¼ï¿½Ò»ï¿½ï¿½ï¿½ï¿½â¿ªï¿½Ø£ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ò»ï¿½ï¿½ï¿½á´¥ï¿½ï¿½ï¿½ï¿?
?
6.ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Í£Ö¹ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ü²ï¿½ï¿½ï¿½ï¿½ï¿½Ô­ï¿½ï¿½ï¿½ï¿½Ä£Ê½ï¿½ï¿½ï¿½ï¿½ï¿½Â»Øµï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½É¨Ê±ï¿½ï¿½ï¿½Ù´Î°ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½/ï¿½ï¿½Í£ï¿½ï¿½ï¿½ï¿½,ï¿½ï¿½ï¿½Ù´ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ç°ï¿½ï¿½Ä£Ê½ï¿½ï¿½ï¿½ë¹¤ï¿½ï¿½×´Ì?
?
7.ï¿½ï¿½ï¿½Ø£ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Üµï¿½Ô´ï¿½ï¿½ï¿½Ø£ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ïµï¿½ï¿½ï¿½ï¿½ï¿½Ô´ï¿½ï¿½ï¿½ï¿½Ê±ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ä¬ï¿½Ï¹ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½É¨Ä£Ê?
ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ø£ï¿½ï¿½ï¿½ï¿½Îªï¿½ï¿½ï¿½ï¿½ï¿½ï¿½É¨ï¿½ï¿½Ý°ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ò±ï¿½Îªï¿½ï¿½Í£/ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ë¿´Ë¿Ó¡Í¼ï¿½ï¿½
?
8.???? ï¿½ï¿½Ô´ï¿½ï¿½ï¿½ï¿½ï®µï¿½ï¿?.4Vï¿½ï¿½ï¿½ï¿½ï¿½ï¿½3.7Vï¿½ï¿½ï¿½ï¿½2000MAHï¿½ï¿½
?
8.1 USB5Vï¿½ï¿½ç£¬ï¿½ï¿½ï¿½ï¿½Î?MICRO? USB
?
8.2 ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Îª0.65A,ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ç·½Ê½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ÌµÆ¡ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½åº¸Ò»ï¿½ï¿½ï¿½ï¿½ï¿?MMË«É«ï¿½Æ£ï¿½
?
8.3 ï¿½ï¿½ï¿½Åµï¿½Ñ¹Îª6V,ï¿½ï¿½ï¿½ï¿½ï¿½Íµï¿½Ñ¹ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ì£¬ï¿½ï¿½ï¿½ï¿½ï¿½Ö¹ï¿½ï¿½Ñ¹Î?.4Vï¿½ï¿½
?
9.???? ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½: ï¿½Î¿ï¿½ï¿½Íºï¿½Ì¼Ë¢ï¿½ï¿½ï¿½ï£¬ RC-365SH-1992-52K ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ñ¹6.8Vï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ø±ï¿½ï¿½ï¿½ï¿½ï¿?
?
ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Òªï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Â·ï¿½å£¬ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ë¾ï¿½á¹©PCBï¿½ï¿½ï¿½Ï£ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ï£ï¿½
?
10.? ï¿½ï¿½É¨ï¿½ï¿½ï¿½ï¿½: ï¿½Î¿ï¿½ï¿½ÍºÅµï¿½Ë¢ï¿½ï¿½ï¿½ï£¬320CH-11480 ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ñ¹6.8V, ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ø±ï¿½ï¿½ï¿½ï¿½ï¿?
?
11.ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½: ï¿½Î¿ï¿½ï¿½Íºï¿½Ì¼Ë¢ï¿½ï¿½ï¿½ï£¬YRK-370SH-24110 D/V6.8ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ñ¹6.8V, ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ø±ï¿½ï¿½ï¿½ï¿½ï¿?
?
ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ê¾ï¿½ï¿½
?
1.???? ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½×¡ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ã¿ï¿½ï¿?ï¿½ï¿½ï¿½ï¿½Ò»ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
2.???? ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Õ£ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ã¿ï¿½ï¿?ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
3.???? ï¿½ï¿½É¨ï¿½ï¿½ï¿½ï¿½ï¿½×ªï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ã¿ï¿½ï¿½5ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
4.???? ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½×ªï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ã¿ï¿½ï¿½5ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½1ï¿½ï¿½ï¿½ï¿½ï¿½Ò»ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿?
5.???? ï¿½ï¿½ï¿½È¶ï¿½×ªï¿½ï¿½ï¿½ßµï¿½ï¿½ï¿½ï¿½ó£¬ºï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ã¿ï¿½ï¿?ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½1ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿?
6.???? ï¿½Íµï¿½Ê±ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ê¾ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿?


***************************************************************************************/
void main(void)
{
	INT8U  KK;
	InitSysclk(1);

	InitT1();
	InitADIO();
	Init_MotorSpeed();
    InitMotorIO();
	Init_Usart1();
	Iint_T5(); //WT.EDIT
	//InitMotorForward();
	InitFanEdgeIO();
	InitLed();
	InitPowerIn();
	Init_IR();
	InitBuzzer();
	SetBuzzerTime(2);
	//InitIMP();
	ReChargeBatter_Init();//WT.EDIT 
	ReChargeBatter_Init();//WT.EDIT 2020.12.13
	Init_MotorSpeedIR();
	ADCtl=1;
	KeyInit(); //WT.KEY inti
	//LedBlueON();
	EdgeCollectDelayTime=0;
	RunStep=0;
	RCurrentMax=300;
	LCurrentMax=300;
	LCurrent=0;
	RCurrent=0;
	FanPersent=0;
	EdgePersent=0;
	EdgeCurrent=0;
	FanCurrent=0;
	EdgeCurrentCount=0;
	EdgeCurrentCount2=0;
	
	Gong_Step=0;
	Enter3=0;
	Mode=1;
	Step=0;
    RunStep =0 ;
	 LedGreenON();
	
	while(1)
	{
		 
	

		if(BatterCharge ==1){
            LedGreenOff();
			Delay_ms(500);
		    LedGreenON();
			Delay_ms(500);
		    LedGreenOff();
			Delay_ms(500);
		    LedGreenON();

		}
       else{
		 CheckGround();
		 CheckRun();
		 KK=ReadKey();
		 CheckMode(KK);
       	}
		 #if 0
		 if(KK==3){
		 	LedGreenON();
			LedRedON();
		    
		  
		 }
		 else if(KK==1){ //left key 
		    LedRedOff();
			LedGreenON();
			
		 }
		 else if(KK==2){ //right Key
		    LedGreenOff();
			LedRedON();
		 
			
		 	}

		#endif 
	   }

}
/************************************************************
	*
	*Function Name:void INT8_17_Rpt() interrupt INT8_17_VECTOR 
	*Function :GPIO ï¿½Ð¶Ïºï¿½ï¿½ï¿½,ï¿½Ð¶Ïºï¿½ INT15,INT14
	*
	*
************************************************************/
void INT8_17_Rpt() interrupt INT8_17_VECTOR 
{
	if(PINTF2&0x01)						//ï¿½Ð¶ï¿½INT15ï¿½Ð¶Ï±ï¿½Ö¾Î»
	{
	  PINTF2 &=~ 0x01;				//ï¿½ï¿½ï¿½INT15ï¿½Ð¶Ï±ï¿½Ö¾Î»		
	  ReadLeftPulsed();
	}
	if(PINTF2&0x02)						//ï¿½Ð¶ï¿½INT15ï¿½Ð¶Ï±ï¿½Ö¾Î»
	{
	  PINTF2 &=~ 0x02;				//ï¿½ï¿½ï¿½INT15ï¿½Ð¶Ï±ï¿½Ö¾Î»		
	  ReadRightPulsed();
	}
	 
	if(PINTF1&0x80)						//ï¿½Ð¶ï¿½INT15ï¿½Ð¶Ï±ï¿½Ö¾Î»
	{
		PINTF1 &=~ 0x80;				//ï¿½ï¿½ï¿½INT15ï¿½Ð¶Ï±ï¿½Ö¾Î»

	}

	#if 1
	if(PINTF1&0x40)		//Interrupt 14 P1_6
	{
		PINTF1 &=~ 0x40;	//Interrupt occur 
		Read_Remote1IR();
	}
   #endif
	
}
/****************************************************************
	*
	*Function Name :void TIMER1_Rpt(void) interrupt TIMER1_VECTOR
	*Function:ï¿½ï¿½Ê±ï¿½ï¿½T1 ,ï¿½Ð¶Ïºï¿½ï¿½ï¿½ 0.1msï¿½ï¿½ï¿½ï¿½ï¿½Ð¶ï¿½

	*
	*
****************************************************************/
void TIMER1_Rpt(void) interrupt TIMER1_VECTOR
{
  
  static INT8U t_10ms;
  static INT8U t_100ms;
  static INT8U t_1s;
  t_10ms++;
  ReadAD5ms();
  Remote1_Count();//IR count

  if(t_10ms>99) //10ms
  {
  	t_10ms=0;
	t_100ms++;
	t_1s++;
	 ReadTimeOver++;
	InterruptTime ++ ; //10ms
	  RunMs++;
 	  CheckLeftMotorSpeed();
	  CheckRightMotorSpeed();
	  AdjustSpeed();
	CheckBuzzer();
	CheckVoltage();
	if(t_100ms>9) //100ms
	{
	 
	  t_100ms=0;
	   Run100MSecond++;
	   KeydelayTime++;
	   KeyRunTime++;
	  CheckLCurrent();
	  CheckRCurrent();
	  CheckFanCurrent();
	  CheckEdgeCurrent();
	  ReadIMP();

	  #if 0
	  Usart1Send[0]=19;
	  Usart1Send[1]=Voltage/100;
	  Usart1Send[2]=Voltage%100;
	  Usart1Send[3]=Mode;
	  Usart1Send[4]=Step;

	  Usart1Send[5]=RunStep;
	  Usart1Send[6]=ImpStatus;
	  Usart1Send[7]=EdgeCurrent>>8;
	  Usart1Send[8]=EdgeCurrent;
	  Usart1Send[9]=GroundDp[0];
	  Usart1Send[10]=GroundDp[1];
	  Usart1Send[11]=GroundDp[2];
	  Usart1Send[12]=LeftMoveMotorData.AvgSpeed;
	  Usart1Send[13]=RightMoveMotorData.AvgSpeed;
	  
	  Usart1Send[14]=LeftMoveMotorData.NowPulsed/100;
	  Usart1Send[15]=LeftMoveMotorData.NowPulsed%100;
	  Usart1Send[16]=RightMoveMotorData.NowPulsed/100;
	  Usart1Send[17]=RightMoveMotorData.NowPulsed%100;
	  Usart1Send[18]=FanCurrent>>8;
	  Usart1Send[19]=FanCurrent;
	  
//	  Usart1Send[20]=EdgeCurrent>>8;
//	  Usart1Send[21]=EdgeCurrent;

	  SendCount=1;
	  SBUF=Usart1Send[SendCount];
      #endif 

	  
	}
	
	if(t_1s>99)
	{
	  t_1s=0;
	  KeyclearTime++;
	  EdgeErrordelayTime++;
	  EdgeCollectDelayTime++;
	  RunSecond++;	 
	  GroundSecond++;
	  ImpSecond++;
	  
      /*
	  Usart1Send[0]=8;
	  Usart1Send[1]=Voltage/100;
	  Usart1Send[2]=Voltage%100;
	  Usart1Send[3]=GroundDp[0];
	  Usart1Send[4]=GroundDp[1];
	  Usart1Send[5]=GroundDp[2];
	  Usart1Send[6]=LCurrent;
	  Usart1Send[7]=RCurrent;
	  Usart1Send[8]=RunStep;
	  SendCount=1;
	  SBUF=Usart1Send[SendCount];
	  */
	  /*
	  Usart1Send[0]=13;
	  Usart1Send[1]=LeftIR.Left;
	  Usart1Send[2]=LeftIR.Right;
	  Usart1Send[3]=LeftIR.Mid;
	  Usart1Send[4]=LeftIR.Top;

	  Usart1Send[5]=MidIR.Left;
	  Usart1Send[6]=MidIR.Right;
	  Usart1Send[7]=MidIR.Mid;
	  Usart1Send[8]=MidIR.Top;

	  Usart1Send[9]=RightIR.Left;
	  Usart1Send[10]=RightIR.Right;
	  Usart1Send[11]=RightIR.Mid;
	  Usart1Send[12]=RightIR.Top;

	  Usart1Send[13]=RunStep;
	  SendCount=1;
	  SBUF=Usart1Send[SendCount];
  	  */
	  //SBUF=Usart1Send[SendCount];	
	}
  }
}
/***************************************************************************************
  * @Ëµï¿½ï¿½  	T5ï¿½Ð¶Ï·ï¿½ï¿½ï¿½ï¿½ï¿½
  *	@ï¿½ï¿½ï¿½ï¿½	ï¿½ï¿½
  * @ï¿½ï¿½ï¿½ï¿½Öµ ï¿½ï¿½
  * @×¢		ï¿½ï¿½
***************************************************************************************/
void TIMER5_Rpt(void) interrupt T5_VECTOR
{     
 
	if(T5CON&0x40)                      //ï¿½Ç·ï¿½Îªï¿½â²¿ï¿½Â¼ï¿½
    {
		
		gui_T5Value =RCAP5;			//ï¿½ï¿½È¡ï¿½ï¿½È¡ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½

		Remote1_ReadIR.Interrupt_IR2 ++ ;
		
      //  Remote1_ReadIR.Interrupt_IR2=RCAP5;
		
    }
	#if 1
	if(gui_newT5Value!=gui_T5Value)
	{	
		if(gui_newT5Value>gui_oldT5Value)
		{
			gui_T5Value = gui_newT5Value-gui_oldT5Value;
		}else if(gui_newT5Value<gui_oldT5Value){
			gui_T5Value = gui_oldT5Value-gui_newT5Value;

		}
		else{
			 gui_newT5Value = gui_T5Value;
			 if(gui_oldT5Value ==0) gui_oldT5Value  = gui_T5Value ;
		}
		
	}
	#endif 

    if(InterruptTime >10){  //>6
					  Usart1Send[0]=2;
					 Usart1Send[1]=gui_T5Value ;//Remote1_ReadIR.ReadIRData[Remote1_ReadIR.ReadIRBit];
                     Usart1Send[2]=Remote1_ReadIR.Interrupt_IR2  ;//0xff;
					 SendCount=1;
				    SBUF=Usart1Send[SendCount];
					  InterruptTime =0;
                      // Remote1_ReadIR.ReadA_Time++;
					  // Remote1_ReadIR.ReadASTAR[Remote1_ReadIR.ReadA_Time]=Remote1_ReadIR.Interrupt_IR2;
					  
					   Remote1_ReadIR.Interrupt_IR2=0;
					  
					  gui_T5Value=0;
					//  if(Remote1_ReadIR.ReadA_Time>3)Remote1_ReadIR.ReadA_Time=0;
					
		    }
		   //else Remote1_ReadIR.Interrupt_IR2 ++ ;

	
    T5CON &=~ 0x40;						//ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½â²¿ï¿½ï¿½ï¿½ï¿½ï¿½Â¼ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ö¾Î?       
	T5CON &=~ 0x80;						//ï¿½ï¿½ï¿½T5ï¿½Ð¶Ï±ï¿½Ö¾Î»      
}

void WDT_Rpt() interrupt WDT_VECTOR
{
	WDTC &=~ 0x20;						//ï¿½ï¿½ï¿½WDTï¿½Ð¶Ï±ï¿½Ö¾Î»
}
